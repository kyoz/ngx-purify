<!-- NORMAL LINKS -->
<a class="pure-menu-item" (click)="onMenuItemClicked()" *ngIf="!hasExternalLink; else externalLinkMenuItem"
   [routerLink]="menuItemData?.url"
   [queryParams]="menuItemData?.params"
   [dir]="textDirection">
  <div class="pure-menu-content level-{{level}}" [ngClass]="{
    'active': active,
    'opened': opened,
    'no-icon': (!menuItemData && menuItemData?.icon && !isMenuOpened) || level !== 0
  }">
    <!-- Icon to replace menu item that doesn't have icon when shrink -->
    <mat-icon class="replace-icon">{{ menuItemData?.icon ? menuItemData?.icon : 'layers' }}</mat-icon>
    <!-- Original icon -->
    <mat-icon class="icon" *ngIf="menuItemData?.icon">{{ menuItemData?.icon }}</mat-icon>
    <span class="name">{{ menuItemData?.name | translate }}</span>
    <span class="badge" *ngIf="menuItemData?.badge" [ngClass]="menuItemData?.badgeColor">
      {{ menuItemData?.badge }}
    </span>
    <mat-icon class="expand-icon" [ngClass]="{ 'expanded': opened }" *ngIf="hasChildren">
      keyboard_arrow_right
    </mat-icon>
  </div>
</a>

<!-- EXTERNAL LINKS -->
<ng-template #externalLinkMenuItem>
  <a class="pure-menu-item" [href]="menuItemData?.url" [dir]="textDirection">
    <div class="pure-menu-content level-{{level}}" [ngClass]="{
      'opened': opened,
      'no-icon': (!menuItemData && menuItemData.icon && !isMenuOpened) || level !== 0
    }">
      <!-- Icon to replace menu item that doesn't have icon when shrink -->
      <mat-icon class="replace-icon">{{ menuItemData?.icon ? menuItemData?.icon : 'layers' }}</mat-icon>
      <!-- Original icon -->
      <mat-icon class="icon" *ngIf="menuItemData?.icon">{{ menuItemData?.icon }}</mat-icon>
      <span class="name">{{ menuItemData?.name | translate }}</span>
      <span class="badge" *ngIf="menuItemData?.badge" [ngClass]="menuItemData?.badgeColor">
        {{ menuItemData?.badge }}
      </span>
    </div>
  </a>
</ng-template>

<div class="children" *ngIf="hasChildren" [ngStyle]="{ 'height.px': height }">
  <pure-menu-item *ngFor="let childMenuItem of menuItemData?.children; trackBy: trackByFn" 
                  [parent]="_parent"
                  [menuItemData]="childMenuItem"
                  [level]="level+1"
                  [isMenuOpened]="isMenuOpened"
                  [textDirection]="textDirection">
  </pure-menu-item>
</div>
